import{_ as t,o as s,c as e,R as a}from"./chunks/framework.8ye2JeXP.js";const f=JSON.parse('{"title":"First Run Prompts","description":"","frontmatter":{},"headers":[],"relativePath":"zh/qgc-dev-guide/custom_build/first_run_prompts.md","filePath":"zh/qgc-dev-guide/custom_build/first_run_prompts.md"}'),i={name:"zh/qgc-dev-guide/custom_build/first_run_prompts.md"},r=a(`<h1 id="first-run-prompts" tabindex="-1">First Run Prompts <a class="header-anchor" href="#first-run-prompts" aria-label="Permalink to &quot;First Run Prompts&quot;">​</a></h1><p>When QGC is started for the first time it prompts the user to specify some initial settings. At the time of writing this documentation those are:</p><ul><li>Unit Settings - What units does the user want to use for display.</li><li>Offline Vehicle Settings - Vehicle information for creating Plans while not connected to a vehicle.</li></ul><p>The custom build architecure includes mechanisms for a custom build to both override the display of these prompts and/or create your own first run prompts.</p><h2 id="first-run-prompt-dialog" tabindex="-1">First Run Prompt Dialog <a class="header-anchor" href="#first-run-prompt-dialog" aria-label="Permalink to &quot;First Run Prompt Dialog&quot;">​</a></h2><p>Each first run prompt is a simple dialog which can display ui to the user. Whether the specific dialog has already been show to the user or not is stored in a setting. Here is the code for the upstream first run prompt dialogs:</p><ul><li><a href="https://github.com/mavlink/qgroundcontrol/blob/master/src/FirstRunPromptDialogs/UnitsFirstRunPrompt.qml" target="_blank" rel="noreferrer">Units Settings</a></li><li><a href="https://github.com/mavlink/qgroundcontrol/blob/master/src/FirstRunPromptDialogs/OfflineVehicleFirstRunPrompt.qml" target="_blank" rel="noreferrer">Offline Vehicle Settings</a></li></ul><h2 id="standard-first-run-prompt-dialogs" tabindex="-1">Standard First Run Prompt Dialogs <a class="header-anchor" href="#standard-first-run-prompt-dialogs" aria-label="Permalink to &quot;Standard First Run Prompt Dialogs&quot;">​</a></h2><p>Each dialog has a unique ID associated with it. When that dialog is shown to the user that ID is registered as having already been displayed so it only happens once (unless you clear settings). The set of first run prompt which are included with upstream QGC are considered the &quot;Standard&quot; set. QGC gets the list of standard prompts to display from the <code>QGCCorePlugin::firstRunPromptStdIds</code> call.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>    /// Returns the standard list of first run prompt ids for possible display. Actual display is based on the</span></span>
<span class="line"><span>    /// current AppSettings::firstRunPromptIds value. The order of this list also determines the order the prompts</span></span>
<span class="line"><span>    /// will be displayed in.</span></span>
<span class="line"><span>    virtual QList&lt;int&gt; firstRunPromptStdIds(void);</span></span></code></pre></div><p>You can override this method in your custom build if you want to hide some of those.</p><h2 id="custom-first-run-prompt-dialogs" tabindex="-1">Custom First Run Prompt Dialogs <a class="header-anchor" href="#custom-first-run-prompt-dialogs" aria-label="Permalink to &quot;Custom First Run Prompt Dialogs&quot;">​</a></h2><p>Custom builds have the ability to create their own set of additional first run prompts as needed through the use of the following QGCCorePlugin method overrides:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>    /// Returns the custom build list of first run prompt ids for possible display. Actual display is based on the</span></span>
<span class="line"><span>    /// current AppSettings::firstRunPromptIds value. The order of this list also determines the order the prompts</span></span>
<span class="line"><span>    /// will be displayed in.</span></span>
<span class="line"><span>    virtual QList&lt;int&gt; firstRunPromptCustomIds(void);</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>    /// Returns the resource which contains the specified first run prompt for display</span></span>
<span class="line"><span>    Q_INVOKABLE virtual QString firstRunPromptResource(int id);</span></span></code></pre></div><p>Your QGCCorePlugin should override these two methods as well as provide static consts for the ids of your new first run prompts. Look at how the standard set is implemented for how to do this and take the same approach.</p><h2 id="order-of-display" tabindex="-1">Order Of Display <a class="header-anchor" href="#order-of-display" aria-label="Permalink to &quot;Order Of Display&quot;">​</a></h2><p>The set of first run prompts shown to the user are in the order returned by the <code>QGCCorePlugin::firstRunPromptStdIds</code> and <code>QGCCorePlugin::firstRunPromptCustomIds</code> with standard prompts shown before the custom prompts. Only the prompts which have not been previously shown to the user are shown.</p><h2 id="always-on-prompts" tabindex="-1">Always On Prompts <a class="header-anchor" href="#always-on-prompts" aria-label="Permalink to &quot;Always On Prompts&quot;">​</a></h2><p>By setting the <code>markAsShownOnClose: false</code> property in your prompt ui implementation you can create a prompt which will show up each time QGC starts. This can be used for things like showing usage tips to your users. If you do this it is best to make sure that this is displayed last.</p>`,20),o=[r];function n(p,l,d,h,u,c){return s(),e("div",null,o)}const g=t(i,[["render",n]]);export{f as __pageData,g as default};
