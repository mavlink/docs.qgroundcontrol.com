import{_ as s,c as e,o as a,ag as t}from"./chunks/framework.BudlMBKT.js";const k=JSON.parse('{"title":"Building using Containers","description":"","frontmatter":{},"headers":[],"relativePath":"ko/qgc-dev-guide/getting_started/container.md","filePath":"ko/qgc-dev-guide/getting_started/container.md"}'),n={name:"ko/qgc-dev-guide/getting_started/container.md"};function h(l,i,o,r,d,p){return a(),e("div",null,i[0]||(i[0]=[t(`<h1 id="building-using-containers" tabindex="-1">Building using Containers <a class="header-anchor" href="#building-using-containers" aria-label="Permalink to &quot;Building using Containers&quot;">​</a></h1><p>The community created a docker image that makes it much easier to build a Linux-based QGC application. This can give you a massive boost in productivity and help with testing.</p><h2 id="about-the-container" tabindex="-1">About the Container <a class="header-anchor" href="#about-the-container" aria-label="Permalink to &quot;About the Container&quot;">​</a></h2><p>The Container is located in the <code>./deploy/docker</code> directory. It&#39;s based on <strong>Ubuntu 24.04</strong>. However, always check the first lines of the Dockerfile in the aforementioned directory to have zero surprises.</p><p>It checks and pre-installs all the dependencies at build time, including Qt, thanks to the use of scripts from the directory <code>./tools/setup</code>. The main advantage of using the container is the usage of the <code>CMake</code> build system and its many improvements over <code>qmake</code>.</p><h2 id="building-the-container" tabindex="-1">Building the Container <a class="header-anchor" href="#building-the-container" aria-label="Permalink to &quot;Building the Container&quot;">​</a></h2><h3 id="script" tabindex="-1">Script <a class="header-anchor" href="#script" aria-label="Permalink to &quot;Script&quot;">​</a></h3><p>To build the container using the script, run this command in the qgc root directory</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./deploy/docker/run-docker-ubuntu.sh</span></span></code></pre></div><h3 id="manual" tabindex="-1">Manual <a class="header-anchor" href="#manual" aria-label="Permalink to &quot;Manual&quot;">​</a></h3><p>if you want to Build using the container manually, then you first have to build the image. You can accomplish this using docker, running the following script from the root of the QGC source code directory.</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./deploy/docker/Dockerfile-build-ubuntu</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> qgc-ubuntu-docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span></code></pre></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>The <code>-t</code> flag is essential. Keep in mind this is tagging the image for later reference since you can have multiple builds of the same container</p></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>If building on a Mac computer with an M1 chip you must also specify the build option <code>--platform linux/x86_64</code> as shown:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --platform</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> linux/x86_64</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./deploy/docker/Dockerfile-build-ubuntu</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> qgc-ubuntu-docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span></code></pre></div><p>Otherwise you will get a build error like:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">qemu-x86_64:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Could</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> open</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/lib64/ld-linux-x86-64.so.2&#39;:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> No</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> such</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> or</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> directory</span></span></code></pre></div></div><h2 id="building-qgc-using-the-container" tabindex="-1">Building QGC using the Container <a class="header-anchor" href="#building-qgc-using-the-container" aria-label="Permalink to &quot;Building QGC using the Container&quot;">​</a></h2><p>To use the container to build QGC, you first need to define a directory to save the artifacts. We recommend you create a <code>build</code> directory on the source tree and then run the docker image using the tag provided above as follows, from the root directory:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> \${PWD}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:/project/source</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> \${PWD}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/build:/project/build</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> qgc-ubuntu-docker</span></span></code></pre></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>For up to date docker command and options reference relevant run-script in <code>deploy/docker</code>, for example <a href="https://github.com/mavlink/qgroundcontrol/blob/master/deploy/docker/run-docker-ubuntu.sh#L16" target="_blank" rel="noreferrer">run-docker-ubuntu.sh</a>.</p></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>If using the script to build the Linux image on a Windows host, you would need to reference the PWD differently. On Windows the docker command is:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> %cd%:/project/source</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> %cd%/build:/project/build</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> qgc-ubuntu-docker</span></span></code></pre></div></div><p>Depending on your system resources, or the resources assigned to your Docker Daemon, the build step can take some time.</p><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><h3 id="windows-bash-r-no-such-file-or-directory" tabindex="-1">Windows: &#39;bash\\r&#39;: No such file or directory <a class="header-anchor" href="#windows-bash-r-no-such-file-or-directory" aria-label="Permalink to &quot;Windows: &#39;bash\\r&#39;: No such file or directory&quot;">​</a></h3><p>This error indicates that a Linux script is being run with Windows line endings, which might occur if <code>git</code> was configured to use Windows line endings:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [4/7] </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RUN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /tmp/qt/install-qt-linux.sh:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#9 0.445 /usr/bin/env: &#39;bash\\r&#39;: No such file or directory</span></span></code></pre></div><p>One fix is to force Linux line endings using the command:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --global</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> core.autocrlf</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span></code></pre></div><p>Then update/recreate your local repository. For, example, use:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --cached</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reset</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --hard</span></span></code></pre></div>`,28)]))}const u=s(n,[["render",h]]);export{k as __pageData,u as default};
