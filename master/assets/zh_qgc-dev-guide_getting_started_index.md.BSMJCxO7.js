import{_ as l,a as n}from"./chunks/qt_creator_build_qgc.BmjHaw1T.js";import{_ as r,c as d,o as h,ag as s,j as e,a as i,t as o}from"./chunks/framework.BudlMBKT.js";const v=JSON.parse('{"title":"从源码开始并构建","description":"","frontmatter":{"qt_version":"6.8.3"},"headers":[],"relativePath":"zh/qgc-dev-guide/getting_started/index.md","filePath":"zh/qgc-dev-guide/getting_started/index.md"}'),p={name:"zh/qgc-dev-guide/getting_started/index.md"},u={class:"warning custom-block"};function c(a,t,g,m,k,b){return h(),d("div",null,[t[13]||(t[13]=s('<h1 id="从源码开始并构建" tabindex="-1">从源码开始并构建 <a class="header-anchor" href="#从源码开始并构建" aria-label="Permalink to &quot;从源码开始并构建&quot;">​</a></h1><p>本主题说明如何获取 <em>QGroundControl</em> 源代码并在本机或在 <em>Vagrant</em> 环境中构建它。 本主题还提供其他可选功能信息及特定于操作系统的功能信息。 本主题还提供其他可选功能信息及特定于操作系统的功能信息。</p><h2 id="每日构建" tabindex="-1">每日构建 <a class="header-anchor" href="#每日构建" aria-label="Permalink to &quot;每日构建&quot;">​</a></h2><p>如果您只是想测试 (而不是调试) 最近生成的 <em>QGroundControl</em> ，那么请使用<a href="./../../qgc-user-guide/releases/daily_builds.html">Daily build</a>。 官方提供了适用于所有平台的版本。 官方提供了适用于所有平台的版本。</p><h2 id="源代码" tabindex="-1">源代码 <a class="header-anchor" href="#源代码" aria-label="Permalink to &quot;源代码&quot;">​</a></h2><p><em>QGroundControl</em> 的源代码保存在 github 上，下载地址为: <a href="https://github.com/mavlink/qgroundcontrol%E3%80%82" target="_blank" rel="noreferrer">https://github.com/mavlink/qgroundcontrol。</a> QGroundControl源代码在Apache 2.0和GPLv3下是双许可的。 有关更多信息，请参阅：许可证。 它是 <a href="https://github.com/mavlink/qgroundcontrol/blob/master/.github/COPYING.md" target="_blank" rel="noreferrer">Apache 2.0 和 GPLv3下的双重授权</a>。</p><p>要获取源文件, 请执行以下操作:</p><ol><li>克隆存储库 (或您的分叉), 包括子模块：</li></ol><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --recursive</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -j8</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/mavlink/qgroundcontrol.git</span></span></code></pre></div><ol start="2"><li>2.更新子模块（每次拉新源代码时都这样做）：</li></ol><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> submodule</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --recursive</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>提示：不能使用Github以zip形式下载源文件，因为zip压缩包中不包含相应的子模块源代码。 你必须使用git工具！ 你必须使用git工具！</p></div><h2 id="构建qgroundcontrol开发环境" tabindex="-1">构建QGroundControl开发环境 <a class="header-anchor" href="#构建qgroundcontrol开发环境" aria-label="Permalink to &quot;构建QGroundControl开发环境&quot;">​</a></h2><h3 id="using-containers" tabindex="-1">Using Containers <a class="header-anchor" href="#using-containers" aria-label="Permalink to &quot;Using Containers&quot;">​</a></h3><p>We support Linux builds using a container found on the source tree of the repository, which can help you develop and deploy the QGC apps without having to install any of the requirements on your local environment.</p><p><a href="./../getting_started/container.html">Container Guide</a></p><h3 id="native-builds" tabindex="-1">Native Builds <a class="header-anchor" href="#native-builds" aria-label="Permalink to &quot;Native Builds&quot;">​</a></h3><p>QGroundControl 支持macos、linux、windows 和 Android 平台的构建。 理论上可以为iOS创建一个 QGC 版本，但不再支持作为标准构建。 <em>QGroundControl</em> 使用 <a href="http://www.qt.io" target="_blank" rel="noreferrer">Qt</a>作为其跨平台支持库。</p>',18)),e("p",null,[i("所需的 Qt 版本为 "+o(a.$frontmatter.qt_version)+" ",1),t[0]||(t[0]=e("strong",null,"(必须无误)",-1)),t[1]||(t[1]=i("。"))]),e("div",u,[t[3]||(t[3]=e("p",{class:"custom-block-title"},"WARNING",-1)),e("p",null,[t[2]||(t[2]=e("strong",null,"Do not use any other version of Qt!",-1)),i(" QGC has been thoroughly tested with the specified version of Qt ("+o(a.$frontmatter.qt_version)+"). There is a significant risk that other Qt versions will inject bugs that affect stability and safety (even if QGC compiles).",1)])]),t[14]||(t[14]=s('<p>更多信息请看: <a href="https://doc.qt.io/qt-6/supported-platforms.html" target="_blank" rel="noreferrer">Qt 6 支持平台列表</a>。</p><h4 id="安装qt" tabindex="-1">安装Qt <a class="header-anchor" href="#安装qt" aria-label="Permalink to &quot;安装Qt&quot;">​</a></h4><p>您<strong>必须像下面描述的那样安装Qt</strong> ，而不是使用预构建的软件包，例如Linux发行版。</p><p>To install Qt:</p><ol><li>下载并运行<a href="https://www.qt.io/download-qt-installer-oss" target="_blank" rel="noreferrer">Qt Online Installer</a></li></ol><ul><li><strong>Ubuntu:</strong><ul><li>使用以下命令将下载的文件设置为可执行文件：<code>chmod + x</code></li><li>您可能还需要安装 libxcb-cursor0</li></ul></li></ul><ol start="2"><li><p>在 _Installation 文件夹页面选择&quot;自定义安装&quot;</p></li><li><p>在 <em>选择组件</em> 页面：</p></li></ol>',7)),e("ul",null,[e("li",null,[e("p",null,[i("如果您没有看到 "+o(a.$frontmatter.qt_version)+"_ 列出_Qt选中 ",1),t[4]||(t[4]=e("em",null,"Archive",-1)),t[5]||(t[5]=i(" 复选框并单击 ")),t[6]||(t[6]=e("em",null,"Filter",-1)),t[7]||(t[7]=i("。"))])]),e("li",null,[e("p",null,[t[8]||(t[8]=i("在 Qt -> ")),e("em",null,"Qt "+o(a.$frontmatter.qt_version),1),t[9]||(t[9]=i(" 下选择："))]),t[10]||(t[10]=s("<ul><li><strong>Windows</strong>: MSVC 2022 <em>arch</em> - 其中 “arch” 指的是您机器的架构</li><li><strong>Mac</strong>：桌面</li><li><strong>Linux</strong>: Desktop gcc 64-bit</li><li><strong>Android</strong>: Android</li></ul>",1))]),t[11]||(t[11]=e("li",null,[e("p",null,[i("选择所有 "),e("em",null,"Additional Libraries")])],-1)),t[12]||(t[12]=e("li",null,[e("p",null,"取消选择 QT Design Studio")],-1))]),t[15]||(t[15]=s('<ol><li>Install Additional Packages (Platform Specific)</li></ol><ul><li><strong>Ubuntu:</strong> <code>sudo bash ./qgroundcontrol/tools/setup/install-dependencies-debian.sh</code></li><li><strong>Fedora:</strong> <code>sudo dnf install speech-dispatcher SDL2-devel SDL2 systemd-devel patchelf</code></li><li><strong>Arch Linux:</strong> <code>pacman -Sy speech-dispatcher patchelf</code></li><li><strong>Mac</strong> <code>sh qgroundcontrol/tools/setup/macos-dependencies.sh</code></li><li><strong>Android</strong> <a href="https://doc.qt.io/qt-6/android-getting-started.html" target="_blank" rel="noreferrer">Setup</a>。 最新版本需要 JDK17 。 NDK 版本：25.1.8937393 您可以通过审查项目设置确认它正在使用：<strong>Projects &gt; Managing Kits &gt; Devices &gt; Android (tab) &gt; Android Settings &gt; <em>JDK location</em></strong>。 注意：访问此处查看更详细的配置 <a href=".github/workflows/android.yml">android.yml</a></li></ul><ol start="2"><li>Install Optional/OS-Specific Functionality</li></ol><p>Optional features that are dependent on the operating system and user-installed libraries are linked/described below. These features can be forcibly enabled/disabled by specifying additional values to qmake. :::</p><ul><li><strong>视频流/Gstream:</strong> - 查看 <a href="https://github.com/mavlink/qgroundcontrol/blob/master/src/VideoManager/VideoReceiver/GStreamer/README.md" target="_blank" rel="noreferrer">视频流</a></li></ul><h4 id="vs" tabindex="-1">安装 Visual Studio (仅Windows) <a class="header-anchor" href="#vs" aria-label="Permalink to &quot;安装 Visual Studio (仅Windows) {#vs}&quot;">​</a></h4><p>安装 <a href="https://visualstudio.microsoft.com/downloads/" target="_blank" rel="noreferrer">Visual Studio 2022 Community Edition</a>。</p><p>When installing, select <em>Desktop development with C++</em> as shown:</p><p><img src="'+l+'" alt="Visual Studio 2019 - Select Desktop Environment with C++"></p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Visual Studio is ONLY used to get the compiler. 构建 <em>QGroundControl</em> 可直接按以下概述，使用 <a href="#qt-creator">Qt Creator</a> 或 <a href="#cmake">cmake</a> 完成。</p></div><h4 id="使用-qt-creator-qt-creator-进行构建" tabindex="-1">使用 Qt Creator {#qt-creator} 进行构建 <a class="header-anchor" href="#使用-qt-creator-qt-creator-进行构建" aria-label="Permalink to &quot;使用 Qt Creator {#qt-creator} 进行构建&quot;">​</a></h4><ol><li><p>启动 <em>Qt Creator</em>，选择 Open Project 并选择 <strong>CMakeLists.txt</strong> 文件。</p></li><li><p>在 <em>Configure Project</em> 页面上，它应该默认您刚刚使用上面的说明安装的 Qt 版本。 如果不从列表中选择该套件，然后点击 <em>Configure Project</em>。</p></li><li><p>使用&quot;hammer&quot; (或&quot;play&quot;) 图标或菜单构建：</p></li></ol><p><img src="'+n+'" alt="QtCreator Build Button"></p><h4 id="在cli-命令行界面-使用-cmake-cmake-进行构建" tabindex="-1">在CLI（命令行界面）使用 CMake {#cmake} 进行构建 <a class="header-anchor" href="#在cli-命令行界面-使用-cmake-cmake-进行构建" aria-label="Permalink to &quot;在CLI（命令行界面）使用 CMake {#cmake} 进行构建&quot;">​</a></h4><p>Example commands to build a default QGC and run it afterwards:</p><ol><li>Make sure you cloned the repository and updated the submodules before, see chapter <em>Source Code</em> above and switch into the repository folder: <code>cd qgroundcontrol</code></li></ol><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> qgroundcontrol</span></span></code></pre></div><ol start="2"><li>配置：</li></ol><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/Qt/6.8.3/gcc_64/bin/qt-cmake -B build -G Ninja -DCMAKE_BUILD_TYPE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Debug</span></span></code></pre></div><p>修改 qt-cmake 的目录，使其与你安装 Qt 的位置以及你想要使用的工具包相匹配。</p><ol start="3"><li>构建</li></ol><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cmake</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --build</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Debug</span></span></code></pre></div><ol start="4"><li>Run the QGroundcontrol binary that was just built: <code>./staging/QGroundControl</code></li></ol><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./build/Debug/QGroundControl</span></span></code></pre></div><h3 id="vagrant" tabindex="-1">Vagrant <a class="header-anchor" href="#vagrant" aria-label="Permalink to &quot;Vagrant&quot;">​</a></h3><p><a href="https://www.vagrantup.com/" target="_blank" rel="noreferrer">Vagrant</a> can be used to build and run <em>QGroundControl</em> within a Linux virtual machine (the build can also be run on the host machine if it is compatible).</p><ol><li><a href="https://www.vagrantup.com/downloads.html" target="_blank" rel="noreferrer">Download</a> and <a href="https://www.vagrantup.com/docs/getting-started/" target="_blank" rel="noreferrer">Install</a> Vagrant</li><li>From the root directory of the <em>QGroundControl</em> repository run <code>vagrant up</code></li><li>To use the graphical environment run <code>vagrant reload</code></li></ol><h3 id="additional-build-notes-for-all-supported-os" tabindex="-1">Additional Build Notes for all Supported OS <a class="header-anchor" href="#additional-build-notes-for-all-supported-os" aria-label="Permalink to &quot;Additional Build Notes for all Supported OS&quot;">​</a></h3><ul><li><strong>Parallel builds:</strong> For non Windows builds, you can use the <code>-j#</code> option to run parellel builds.</li><li><strong>If you get this error when running <em>QGroundControl</em></strong>: <code>/usr/lib/x86_64-linux-gnu/libstdc++.so.6: version &#39;GLIBCXX_3.4.20&#39; not found.</code>, you need to either update to the latest <em>gcc</em>, or install the latest <em>libstdc++.6</em> using: <code>sudo apt-get install libstdc++6</code>.</li><li><strong>Unit tests:</strong> 若要运行 <a href="./../contribute/unit_tests.html">unit tests</a>，使用 <code>QGC_UNITEST_BUILD</code> 定义在 <code>debug</code> 模式下构建，然后复制 <code>deposition / qgroundcontrol-start。 运行测试前，将 </code>deploy/qgroundcontrol-start.sh` 脚本复制到debug目录中。</li></ul><h2 id="building-qgc-installation-files" tabindex="-1">Building QGC Installation Files <a class="header-anchor" href="#building-qgc-installation-files" aria-label="Permalink to &quot;Building QGC Installation Files&quot;">​</a></h2><p>You can additionally create installation file(s) for <em>QGroundControl</em> as part of the normal build process.</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cmake</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Release</span></span></code></pre></div>',32))])}const q=r(p,[["render",c]]);export{v as __pageData,q as default};
