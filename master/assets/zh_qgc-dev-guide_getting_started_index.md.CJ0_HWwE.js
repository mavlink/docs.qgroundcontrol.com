import{_ as o,a as l}from"./chunks/qt_creator_build_qgc.BmjHaw1T.js";import{_ as r,c as d,o as u,ag as a,j as e,a as i,t as n}from"./chunks/framework.BudlMBKT.js";const v=JSON.parse('{"title":"Getting Started with Source and Builds","description":"","frontmatter":{"qt_version":"6.8.2"},"headers":[],"relativePath":"zh/qgc-dev-guide/getting_started/index.md","filePath":"zh/qgc-dev-guide/getting_started/index.md"}'),p={name:"zh/qgc-dev-guide/getting_started/index.md"},h={class:"warning custom-block"};function g(s,t,c,m,k,b){return u(),d("div",null,[t[16]||(t[16]=a('<h1 id="getting-started-with-source-and-builds" tabindex="-1">Getting Started with Source and Builds <a class="header-anchor" href="#getting-started-with-source-and-builds" aria-label="Permalink to &quot;Getting Started with Source and Builds&quot;">​</a></h1><p>本主题说明如何获取QGroundControl源代码并在本机或在Vagrant(虚拟机)环境中构建它。 本主题还提供其他可选功能信息及特定于操作系统的功能信息。 It also provides information about optional or OS specific functionality.</p><h2 id="每日构建" tabindex="-1">每日构建 <a class="header-anchor" href="#每日构建" aria-label="Permalink to &quot;每日构建&quot;">​</a></h2><p>If you just want to test (and not debug) a recent build of <em>QGroundControl</em> you can use the <a href="./../../qgc-user-guide/releases/daily_builds.html">Daily Build</a>. Versions are provided for all platforms.</p><h2 id="源代码" tabindex="-1">源代码 <a class="header-anchor" href="#源代码" aria-label="Permalink to &quot;源代码&quot;">​</a></h2><p><em>QGroundControl</em> 的源代码保存在 github 上，下载地址为: <a href="https://github.com/mavlink/qgroundcontrol%E3%80%82" target="_blank" rel="noreferrer">https://github.com/mavlink/qgroundcontrol。</a> QGroundControl源代码在Apache 2.0和GPLv3下是双许可的。 有关更多信息，请参阅：许可证。 It is <a href="https://github.com/mavlink/qgroundcontrol/blob/master/.github/COPYING.md" target="_blank" rel="noreferrer">dual-licensed under Apache 2.0 and GPLv3</a>.</p><p>要获取源文件, 请执行以下操作:</p><ol><li><p>Clone the repo (or your fork) including submodules:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">克隆存储库</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (或您的分叉), 包括子模块: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">--recursive</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -j8</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/mavlink/qgroundcontrol.git`</span></span></code></pre></div></li><li><p>Update submodules (required each time you pull new source code):</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2.更新子模块（每次拉新源代码时都这样做）：</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> submodule update </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">--recursive</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`</span></span></code></pre></div></li></ol><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>提示：不能使用Github以zip形式下载源文件，因为zip压缩包中不包含相应的子模块源代码。 你必须使用git工具！ You must use git!</p></div><h2 id="构建qgroundcontrol开发环境" tabindex="-1">构建QGroundControl开发环境 <a class="header-anchor" href="#构建qgroundcontrol开发环境" aria-label="Permalink to &quot;构建QGroundControl开发环境&quot;">​</a></h2><h3 id="using-containers" tabindex="-1">Using Containers <a class="header-anchor" href="#using-containers" aria-label="Permalink to &quot;Using Containers&quot;">​</a></h3><p>We support Linux builds using a container found on the source tree of the repository, which can help you develop and deploy the QGC apps without having to install any of the requirements on your local environment.</p><p><a href="./../getting_started/container.html">Container Guide</a></p><h3 id="native-builds" tabindex="-1">Native Builds <a class="header-anchor" href="#native-builds" aria-label="Permalink to &quot;Native Builds&quot;">​</a></h3><p><em>QGroundControl</em> builds are supported for macOS, Linux, Windows, and Android. Creating a version of QGC for iOS is theoretically possible but is no longer supported as a standard build. <em>QGroundControl</em> uses <a href="http://www.qt.io" target="_blank" rel="noreferrer">Qt</a> as its cross-platform support library.</p>',15)),e("p",null,[i("The required version of Qt is "+n(s.$frontmatter.qt_version)+" ",1),t[0]||(t[0]=e("strong",null,"(only)",-1)),t[1]||(t[1]=i("."))]),e("div",h,[t[3]||(t[3]=e("p",{class:"custom-block-title"},"WARNING",-1)),e("p",null,[t[2]||(t[2]=e("strong",null,"Do not use any other version of Qt!",-1)),i(" QGC has been thoroughly tested with the specified version of Qt ("+n(s.$frontmatter.qt_version)+"). There is a significant risk that other Qt versions will inject bugs that affect stability and safety (even if QGC compiles).",1)])]),t[17]||(t[17]=e("p",null,[i("For more information see: "),e("a",{href:"https://doc.qt.io/qt-6/supported-platforms.html",target:"_blank",rel:"noreferrer"},"Qt 6 supported platform list"),i(".")],-1)),t[18]||(t[18]=e("h4",{id:"安装qt",tabindex:"-1"},[i("安装Qt "),e("a",{class:"header-anchor",href:"#安装qt","aria-label":'Permalink to "安装Qt"'},"​")],-1)),t[19]||(t[19]=e("p",null,[i("You "),e("strong",null,"must install Qt as described below"),i(" instead of using pre-built packages from say, a Linux distribution.")],-1)),t[20]||(t[20]=e("p",null,"To install Qt:",-1)),e("ol",null,[t[11]||(t[11]=a('<li><p>Download and run the <a href="https://www.qt.io/download-qt-installer-oss" target="_blank" rel="noreferrer">Qt Online Installer</a></p><ul><li><strong>Ubuntu:</strong><ul><li>使用以下命令将下载的文件设置为可执行文件：<code>chmod + x</code></li><li>You may also need to install libxcb-cursor0</li></ul></li></ul></li><li><p>On the <em>Installation Folder</em> page select &quot;Custom Installation&quot;</p></li>',2)),e("li",null,[t[10]||(t[10]=e("p",null,[i("On the "),e("em",null,"Select Components"),i(" page:")],-1)),e("ul",null,[e("li",null,[t[4]||(t[4]=i("I you don't see ")),e("em",null,"Qt "+n(s.$frontmatter.qt_version),1),t[5]||(t[5]=i(" listed check the ")),t[6]||(t[6]=e("em",null,"Archive",-1)),t[7]||(t[7]=i(" checkbox and click ")),t[8]||(t[8]=e("em",null,"Filter",-1)),t[9]||(t[9]=i("."))])])])]),e("ul",null,[e("li",null,[t[12]||(t[12]=i("Under Qt -> ")),e("em",null,"Qt "+n(s.$frontmatter.qt_version),1),t[13]||(t[13]=a(" select: <ul><li><strong>Windows</strong>: MSVC 2022 <em>arch</em> - where <em>arch</em> is the architecture of your machine</li><li><strong>Mac</strong>: Desktop</li><li><strong>Linux</strong>: Desktop gcc 64-bit</li><li><strong>Android</strong>: Android</li></ul>",2))]),t[14]||(t[14]=e("li",null,[i("Select all "),e("em",null,"Additional Libraries")],-1)),t[15]||(t[15]=e("li",null,"Deselect QT Design Studio",-1))]),t[21]||(t[21]=a('<ol><li><p>Install Additional Packages (Platform Specific)</p><ul><li><strong>Ubuntu:</strong> <code>sudo bash ./qgroundcontrol/tools/setup/install-dependencies-debian.sh</code></li><li><strong>Fedora:</strong> <code>sudo dnf install speech-dispatcher SDL2-devel SDL2 systemd-devel patchelf</code></li><li><strong>Arch Linux:</strong> <code>pacman -Sy speech-dispatcher patchelf</code></li><li><strong>Mac</strong> <code>sh qgroundcontrol/tools/setup/macos-dependencies.sh</code></li><li><strong>Android</strong> <a href="https://doc.qt.io/qt-6/android-getting-started.html" target="_blank" rel="noreferrer">Setup</a>. JDK17 is required for the latest updated versions. NDK Version: 25.1.8937393 You can confirm it is being used by reviewing the project setting: <strong>Projects &gt; Manage Kits &gt; Devices &gt; Android (tab) &gt; Android Settings &gt; <em>JDK location</em></strong>. Note: Visit here for more detailed configurations <a href=".github/workflows/android.yml">android.yml</a></li></ul></li><li><p>Install Optional/OS-Specific Functionality</p><p>Optional features that are dependent on the operating system and user-installed libraries are linked/described below. These features can be forcibly enabled/disabled by specifying additional values to qmake. :::</p><ul><li><strong>Video Streaming/Gstreamer:</strong> - see <a href="https://github.com/mavlink/qgroundcontrol/blob/master/src/VideoManager/VideoReceiver/GStreamer/README.md" target="_blank" rel="noreferrer">Video Streaming</a></li></ul></li></ol><h4 id="vs" tabindex="-1">Install Visual Studio (Windows Only) <a class="header-anchor" href="#vs" aria-label="Permalink to &quot;Install Visual Studio (Windows Only) {#vs}&quot;">​</a></h4><p>Install <a href="https://visualstudio.microsoft.com/downloads/" target="_blank" rel="noreferrer">Visual Studio 2022 Community Edition</a>.</p><p>When installing, select <em>Desktop development with C++</em> as shown:</p><p><img src="'+o+'" alt="Visual Studio 2019 - Select Desktop Environment with C++"></p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Visual Studio is ONLY used to get the compiler. Building <em>QGroundControl</em> is done using <a href="#qt-creator">Qt Creator</a> or <a href="#cmake">cmake</a> directly as outlined below.</p></div><h4 id="qt-creator" tabindex="-1">Building using Qt Creator <a class="header-anchor" href="#qt-creator" aria-label="Permalink to &quot;Building using Qt Creator {#qt-creator}&quot;">​</a></h4><ol><li><p>Launch <em>Qt Creator</em>, select Open Project and select the <strong>CMakeLists.txt</strong> file.</p></li><li><p>On the <em>Configure Project</em> page it should default to the version of Qt you just installed using the instruction above. If not select that kit from the list and click <em>Configure Project</em>.</p></li><li><p>Build using the &quot;hammer&quot; (or &quot;play&quot;) icons or the menus:</p><p><img src="'+l+'" alt="QtCreator Build Button"></p></li></ol><h4 id="cmake" tabindex="-1">Build using CMake on CLI <a class="header-anchor" href="#cmake" aria-label="Permalink to &quot;Build using CMake on CLI {#cmake}&quot;">​</a></h4><p>Example commands to build a default QGC and run it afterwards:</p><ol><li><p>Make sure you cloned the repository and updated the submodules before, see chapter <em>Source Code</em> above and switch into the repository folder: <code>cd qgroundcontrol</code></p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> qgroundcontrol</span></span></code></pre></div></li><li><p>Configure:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> cmake</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -B</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -G</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Ninja</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -DCMAKE_BUILD_TYPE=Debug</span></span></code></pre></div></li><li><p>Build</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cmake</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --build</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Debug</span></span></code></pre></div></li><li><p>Run the QGroundcontrol binary that was just built: <code>./staging/QGroundControl</code></p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./build/Debug/QGroundControl</span></span></code></pre></div></li></ol><h3 id="vagrant" tabindex="-1">Vagrant <a class="header-anchor" href="#vagrant" aria-label="Permalink to &quot;Vagrant&quot;">​</a></h3><p><a href="https://www.vagrantup.com/" target="_blank" rel="noreferrer">Vagrant</a> can be used to build and run <em>QGroundControl</em> within a Linux virtual machine (the build can also be run on the host machine if it is compatible).</p><ol><li><a href="https://www.vagrantup.com/downloads.html" target="_blank" rel="noreferrer">Download</a> and <a href="https://www.vagrantup.com/docs/getting-started/" target="_blank" rel="noreferrer">Install</a> Vagrant</li><li>From the root directory of the <em>QGroundControl</em> repository run <code>vagrant up</code></li><li>To use the graphical environment run <code>vagrant reload</code></li></ol><h3 id="additional-build-notes-for-all-supported-os" tabindex="-1">Additional Build Notes for all Supported OS <a class="header-anchor" href="#additional-build-notes-for-all-supported-os" aria-label="Permalink to &quot;Additional Build Notes for all Supported OS&quot;">​</a></h3><ul><li><strong>Parallel builds:</strong> For non Windows builds, you can use the <code>-j#</code> option to run parellel builds.</li><li><strong>If you get this error when running <em>QGroundControl</em></strong>: <code>/usr/lib/x86_64-linux-gnu/libstdc++.so.6: version &#39;GLIBCXX_3.4.20&#39; not found.</code>, you need to either update to the latest <em>gcc</em>, or install the latest <em>libstdc++.6</em> using: <code>sudo apt-get install libstdc++6</code>.</li><li><strong>Unit tests:</strong> To run the <a href="./../contribute/unit_tests.html">unit tests</a>, build in <code>debug</code> mode with <code>QGC_UNITTEST_BUILD</code> definition, and then copy <code>deploy/qgroundcontrol-start.sh</code> script into the <code>debug</code> directory before running the tests.</li></ul><h2 id="building-qgc-installation-files" tabindex="-1">Building QGC Installation Files <a class="header-anchor" href="#building-qgc-installation-files" aria-label="Permalink to &quot;Building QGC Installation Files&quot;">​</a></h2><p>You can additionally create installation file(s) for <em>QGroundControl</em> as part of the normal build process.</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cmake</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Release</span></span></code></pre></div>',19))])}const y=r(p,[["render",g]]);export{v as __pageData,y as default};
